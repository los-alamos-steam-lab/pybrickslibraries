# pybricks blocks file:{"blocks":{"languageVersion":0,"blocks":[{"type":"blockGlobalSetup","id":"bjK,wS1MYO7aiYkFSwd{","x":16,"y":-8,"deletable":false,"next":{"block":{"type":"variables_set_inventor_hub","id":"{PfnO/^^7jbE|:YQqv0_","extraState":{"optionLevel":0},"fields":{"VAR":{"id":"*5#BC_CDLI:7,Tq%_{#f"}},"next":{"block":{"type":"variables_setup_imported_function","id":"giC/s|xX/K+.WCijR:zo","fields":{"FROM_MODULE":{"id":"w]`T$QwJF4ht3uH?*z2k"},"VAR":{"id":"Sffa}}200*Q_|`ua!5IE"}},"next":{"block":{"type":"variables_setup_imported_function","id":"=}XV0~`:H4uDYYfl-:pP","fields":{"FROM_MODULE":{"id":"w]`T$QwJF4ht3uH?*z2k"},"VAR":{"id":"NdzekE#*A-3^u{=XF,9y"}},"next":{"block":{"type":"variables_setup_imported_function","id":"$N9wYz5Ei.nBnb!s-E4`","fields":{"FROM_MODULE":{"id":"w]`T$QwJF4ht3uH?*z2k"},"VAR":{"id":"InaCEX!Wvubx{)h9ua7L"}},"next":{"block":{"type":"variables_setup_imported_function","id":"9de-bU,Q93MJsx-Ws-@H","fields":{"FROM_MODULE":{"id":"w]`T$QwJF4ht3uH?*z2k"},"VAR":{"id":"H)(CPxdW.NkK~=wz;ku{"}},"next":{"block":{"type":"variables_setup_imported_function","id":"OmOGV]+h9YF6;e({M0qo","fields":{"FROM_MODULE":{"id":"w]`T$QwJF4ht3uH?*z2k"},"VAR":{"id":"LB$!O#z=:D;Ve=[[[MyW"}},"next":{"block":{"type":"variables_setup_imported_function","id":"_*VJ9t9wDiL`|6C^-Jvi","fields":{"FROM_MODULE":{"id":"w]`T$QwJF4ht3uH?*z2k"},"VAR":{"id":"+m(MfDeqiFqzmz9`H_+l"}},"next":{"block":{"type":"variables_setup_imported_function","id":"+.L;XRfv*iLwd;JvJOE|","fields":{"FROM_MODULE":{"id":"w]`T$QwJF4ht3uH?*z2k"},"VAR":{"id":"4:t2Gmp/5/k+-OnrbqUo"}},"next":{"block":{"type":"variables_setup_any","id":".i]KE~yO`yx2nb$dJ^UD","fields":{"VAR":{"id":"7)~un:z)5e}=.]Wk?bCp"}},"inputs":{"VALUE0":{"shadow":{"type":"blockMathNumber","id":"kRDg[]2Jjl/I7$iGo{u;","fields":{"NUM":0}},"block":{"type":"blockImportTaskCallValue","id":"WbkBvd[VGI-zG7LbS$ub","extraState":{"optionLevel":1},"inputs":{"VAR":{"shadow":{"type":"variables_get_imported_function","id":"g,noa/6jb8V.:Da5`;2c","fields":{"VAR":{"id":"Sffa}}200*Q_|`ua!5IE","name":"DuploTrain","type":"FunctionImported"}}}},"ARG0":{"shadow":{"type":"blockMathNumber","id":"Na8]j[7(7=|ss0fja0k9","fields":{"NUM":0}},"block":{"type":"blockTextLiteral","id":"zKAsU3Fo^!lNOczm5Ny-","fields":{"TEXT":"new"}}}}}}},"next":{"block":{"type":"variables_set_motor","id":"fEi2x[#OqUMq5sguv5Z@","fields":{"VAR":{"id":"A%Q4I{Fw1}[HZ25D/7sC"}},"inputs":{"PORT":{"shadow":{"type":"blockParametersPort","id":"kEO(A/bs@Lb*g_AUK5=V","fields":{"NAME":"A"}}},"POSITIVE_DIRECTION":{"shadow":{"type":"blockParametersDirection","id":"kTOtk9n{hKY+nkHvu?-9","fields":{"SELECTION":"Direction.CLOCKWISE"}}}},"next":{"block":{"type":"variables_set_color_sensor","id":"c4VL[.L{UcjlqM%/+444","extraState":{"optionLevel":0},"fields":{"VAR":{"id":"@XZHI/7H?CTN~buGAy24"}},"inputs":{"PORT":{"shadow":{"type":"blockParametersPort","id":"^M]_hxv]hYHjrInqKNyu","fields":{"NAME":"F"}}}},"next":{"block":{"type":"variables_setup_any","id":"xZ=xm5c$ni1qJiu))M;R","fields":{"VAR":{"id":"TE4wo///`0hS0R{cxKph"}},"inputs":{"VALUE0":{"shadow":{"type":"blockMathNumber","id":"/9!vjomG]9jBNf*^R9yi","fields":{"NUM":0}},"block":{"type":"variables_get_color","id":"bhS6p](@/d$]^Nq+/@{i","fields":{"COLOUR":"#000000","VAR":{"id":"TFmFW?).wKf=+rwisHES"}}}}},"next":{"block":{"type":"variables_setup_any","id":":z^;f3A`sL0$!(3*8!w)","fields":{"VAR":{"id":"zU|zw|^jx16lQDrMxQ!}"}},"inputs":{"VALUE0":{"shadow":{"type":"blockMathNumber","id":"Ag*vwn/;3P0FH0tk[|BM","fields":{"NUM":0}},"block":{"type":"variables_get_color","id":"4ZhQ:bMim8)I~,u51sGU","fields":{"COLOUR":"#000000","VAR":{"id":"TFmFW?).wKf=+rwisHES"}}}}},"next":{"block":{"type":"variables_setup_any","id":"s(2!s`*s.vB}q(#uP:B|","fields":{"VAR":{"id":"Et2W!b}zsYFYxI[Se.}N"}},"inputs":{"VALUE0":{"shadow":{"type":"blockMathNumber","id":"I+S}o*$ZhlvqWR:gq03}","fields":{"NUM":0}},"block":{"type":"blockNone","id":",)H[7Yz6X_52}VKro6E/"}}},"next":{"block":{"type":"variables_setup_any","id":"oS)j(_[}~Tz@3#D`D=hn","fields":{"VAR":{"id":"xrrSdt#dhf(z@N_OqNbl"}},"inputs":{"VALUE0":{"shadow":{"type":"blockMathNumber","id":"?NZIDE2g=m)]|SKumV(?","fields":{"NUM":0}},"block":{"type":"blockNone","id":"$8-wZ5i#fLB(e=H-oRZ;"}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},{"type":"blockGlobalStart","id":"3tJe|AWl0baN(wH9a$@.","x":0,"y":799,"deletable":false,"next":{"block":{"type":"blockMotorResetAngle","id":"X005$lM;]ER|){rxF@Hb","inputs":{"VAR":{"shadow":{"type":"variables_get_motor_device","id":"=UI5iQJ$4FQQL;=e`M2=","fields":{"VAR":{"id":"A%Q4I{Fw1}[HZ25D/7sC","name":"dial","type":"Motor"}}}},"VALUE0":{"shadow":{"type":"unit_angle","id":"TR?=F+tC]E1wvLmcvxMT","fields":{"VALUE0":0}}}},"next":{"block":{"type":"blockComment","id":"cE%o[V2hg4*n#9aiXhHx","fields":{"FIELDNAME":"My youngest would often press the hub button. This\nnormally stops the program, so it interrupts the fun\nof just playing and independently exploring.\n\nThis block disables that, so the program doesn't stop.\nIf you do want to stop eventually, just hold the button\nto turn the hub off entirely, as you normally would."},"next":{"block":{"type":"blockHubStopButton","id":"hcI!/Ho0c.Dcq=lU`rrq","inputs":{"VAR":{"shadow":{"type":"variables_get_button_hub","id":"H.D:DDKpPt1URrl`G/wf","fields":{"VAR":{"id":"*5#BC_CDLI:7,Tq%_{#f","name":"inventor hub","type":"InventorHub"}}}},"VALUE0":{"shadow":{"type":"blockParametersButton","id":",~Vh82WirQz;@W9Sn.BF","fields":{"VALUE":"BLUETOOTH"}}}},"next":{"block":{"type":"blockImportTaskCallStatement","id":"pqGxOjK2]CrDp-Vcvs6_","extraState":{"optionLevel":1},"inputs":{"VAR":{"shadow":{"type":"variables_get_imported_function","id":"8n[e`C}-_s(NkWKF3]?U","fields":{"VAR":{"id":"4:t2Gmp/5/k+-OnrbqUo","name":"testinputs","type":"FunctionImported"}}}},"ARG0":{"shadow":{"type":"blockMathNumber","id":"e|87I,cMCG3/a?#7g|qT","fields":{"NUM":0}},"block":{"type":"blockVariableGetValue","id":"gpT)9S^vr8KEbDxEheo2","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"T2G!Ups38Y[s-FNg7.-z","fields":{"VAR":{"id":"7)~un:z)5e}=.]Wk?bCp","name":"train","type":"Any"}}}}}}}}}}}}}}}}},{"type":"blockTextLiteral","id":"$+}Y#*T:W[`-wD$D{j7K","x":572,"y":1271,"enabled":false,"fields":{"TEXT":"white"}},{"type":"variables_get_color","id":"C%xyH(|,?i=bxgT~d?[%","x":172,"y":1436,"enabled":false,"fields":{"COLOUR":"#ff0000","VAR":{"id":"omF5^C?F|_S2U^]Da5WM"}}},{"type":"blockImportTaskCallStatement","id":"`rBQoT:chL`7=fCba1]W","x":-17,"y":1329,"enabled":false,"extraState":{"optionLevel":2},"inputs":{"VAR":{"shadow":{"type":"variables_get_imported_function","id":"u~q|WZY%,*]PGd3@N9%+","fields":{"VAR":{"id":"InaCEX!Wvubx{)h9ua7L","name":"play_sound","type":"FunctionImported"}}}},"ARG0":{"shadow":{"type":"blockMathNumber","id":"k*kN}}Ni!gyWAr#OsKen","fields":{"NUM":50}},"block":{"type":"blockVariableGetValue","id":"FR@4c8F4UM?nKH]YfKJj","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"6qt3n8GW/`xCY{^YIxmQ","fields":{"VAR":{"id":"7)~un:z)5e}=.]Wk?bCp","name":"train","type":"Any"}}}}}}},"ARG1":{"shadow":{"type":"blockMathNumber","id":"B%d#N@tor?Fdx;7!2uYP","fields":{"NUM":0}},"block":{"type":"blockTextLiteral","id":"=oP@A~`gu[cGKQAcs2p}","fields":{"TEXT":"depart"}}}}},{"type":"blockNone","id":"7w-LDI!eSIcz%~QlXX[n","x":371,"y":1129,"enabled":false},{"type":"blockImportTaskCallStatement","id":"4WMOh@#PQZ)[#{}ELL;8","x":506,"y":1447,"enabled":false,"extraState":{"optionLevel":1},"inputs":{"VAR":{"shadow":{"type":"variables_get_imported_function","id":"x]h)}*aBd10co?eJ1@1H","fields":{"VAR":{"id":"+m(MfDeqiFqzmz9`H_+l","name":"testports","type":"FunctionImported"}}}},"ARG0":{"shadow":{"type":"blockMathNumber","id":"e|87I,cMCG3/a?#7g|qT","fields":{"NUM":0}},"block":{"type":"blockVariableGetValue","id":"tEgRdpi+pO=6RITiTCWZ","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"kQb{~Bw2p7MM{TU#Y@()","fields":{"VAR":{"id":"7)~un:z)5e}=.]Wk?bCp","name":"train","type":"Any"}}}}}}}},"next":{"block":{"type":"blockFlowWhile","id":"kNA3Ql:gd,YZ~o`U3HFf","enabled":false,"fields":{"MODE":"WHILE"},"inputs":{"BOOL":{"shadow":{"type":"blockLogicTrue","id":"~PrquIN`#DE76x;sQT,-"}}}}}}]},"variables":[{"name":"red","id":"omF5^C?F|_S2U^]Da5WM","type":"ColorDef"},{"name":"orange","id":"c4B}9l^;G*zq3ivTVEeO","type":"ColorDef"},{"name":"yellow","id":"X{5Y-Em{$l`HC{[4_/*Q","type":"ColorDef"},{"name":"green","id":"]dSoqm%[m9g2|lcZ?Vt%","type":"ColorDef"},{"name":"cyan","id":"g3Twx:Qh[n8zecY^e,:}","type":"ColorDef"},{"name":"blue","id":"m(z^qpO7D5BW9tz26|Pf","type":"ColorDef"},{"name":"violet","id":"Y{?!s3Ht.4,JX]Pn4{3d","type":"ColorDef"},{"name":"magenta","id":"P#0lFve(w}KW!j_+.q{w","type":"ColorDef"},{"name":"white","id":"a%.-R]L(`w^(o=AEt]K`","type":"ColorDef"},{"name":"none","id":"TFmFW?).wKf=+rwisHES","type":"ColorDef"},{"name":"color sensor","id":"@XZHI/7H?CTN~buGAy24","type":"ColorSensor"},{"name":"dial","id":"A%Q4I{Fw1}[HZ25D/7sC","type":"Motor"},{"name":"last color","id":"TE4wo///`0hS0R{cxKph","type":"Any"},{"name":"current color","id":"zU|zw|^jx16lQDrMxQ!}","type":"Any"},{"name":"train","id":"7)~un:z)5e}=.]Wk?bCp","type":"Any"},{"name":"last color code","id":"Et2W!b}zsYFYxI[Se.}N","type":"Any"},{"name":"current color code","id":"xrrSdt#dhf(z@N_OqNbl","type":"Any"},{"name":"inventor hub","id":"*5#BC_CDLI:7,Tq%_{#f","type":"InventorHub"},{"name":"duplo2","id":"w]`T$QwJF4ht3uH?*z2k","type":"ModuleImported"},{"name":"start_driving","id":"NdzekE#*A-3^u{=XF,9y","type":"FunctionImported"},{"name":"play_sound","id":"InaCEX!Wvubx{)h9ua7L","type":"FunctionImported"},{"name":"DuploTrain","id":"Sffa}}200*Q_|`ua!5IE","type":"FunctionImported"},{"name":"set_light","id":"H)(CPxdW.NkK~=wz;ku{","type":"FunctionImported"},{"name":"get_color","id":"LB$!O#z=:D;Ve=[[[MyW","type":"FunctionImported"},{"name":"testports","id":"+m(MfDeqiFqzmz9`H_+l","type":"FunctionImported"},{"name":"testinputs","id":"4:t2Gmp/5/k+-OnrbqUo","type":"FunctionImported"}],"info":{"type":"pybricks","version":"1.3.2"}}
from pybricks.hubs import InventorHub
from pybricks.parameters import Button, Color, Direction, Port
from pybricks.pupdevices import ColorSensor, Motor

from duplo2 import DuploTrain, get_color, play_sound, set_light, start_driving, testinputs, testports

# Set up all devices.
inventor_hub = InventorHub()
color_sensor = ColorSensor(Port.F)
dial = Motor(Port.A, Direction.CLOCKWISE)

# Initialize variables.
train = DuploTrain('new')
last_color = Color.NONE
current_color = Color.NONE
last_color_code = None
current_color_code = None


# The main program starts here.
dial.reset_angle(0)
# My youngest would often press the hub button. This
# normally stops the program, so it interrupts the fun
# of just playing and independently exploring.

# This block disables that, so the program doesn't stop.
# If you do want to stop eventually, just hold the button
# to turn the hub off entirely, as you normally would.
inventor_hub.system.set_stop_button(Button.BLUETOOTH)
testinputs(train)
